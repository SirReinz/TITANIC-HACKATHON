<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Clash: Pong Battle</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Space+Grotesk:wght@700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F5;
            color: #111827;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            text-align: center;
            background-color: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        h1 {
            font-family: 'Space Grotesk', sans-serif;
            color: #111827;
            margin-top: 0;
        }
        canvas {
            background-color: #e5e7eb; /* bg-muted */
            border-radius: 8px;
            margin-top: 1rem;
            border: 2px solid #111827;
        }
        .scores {
            display: flex;
            justify-content: space-around;
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            font-family: 'Space Grotesk', sans-serif;
        }
        .player1-score { color: #FF8C00; } /* Accent Orange */
        .player2-score { color: #29ABE2; } /* Primary Blue */
        .instructions {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Campus Clash: Pong</h1>
        <div class="scores">
            <div>P1: <span id="player1Score" class="player1-score">0</span></div>
            <div>P2: <span id="player2Score" class="player2-score">0</span></div>
        </div>
        <canvas id="pongCanvas" width="800" height="400"></canvas>
        <div class="instructions">
            <p>Play against the AI using your mouse.</p>
            <p>First to 5 points wins!</p>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('pongCanvas');
            if (!canvas) return;
            const context = canvas.getContext('2d');
            if (!context) return;

            const player1ScoreElem = document.getElementById('player1Score');
            const player2ScoreElem = document.getElementById('player2Score');

            const winningScore = 5;
            let gameOver = false;

            // Game elements
            const paddleWidth = 10;
            const paddleHeight = 100;

            let ball = {
                x: canvas.width / 2,
                y: canvas.height / 2,
                radius: 10,
                speedX: 8,
                speedY: 8,
            };

            const player1 = {
                x: 10,
                y: canvas.height / 2 - paddleHeight / 2,
                width: paddleWidth,
                height: paddleHeight,
                score: 0,
            };

            const player2 = {
                x: canvas.width - 10 - paddleWidth,
                y: canvas.height / 2 - paddleHeight / 2,
                width: paddleWidth,
                height: paddleHeight,
                score: 0,
            };

            const paddleSpeed = 8;

            // Keyboard state
            const keys = {};

            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const mouseY = e.clientY - rect.top; // Get mouse Y position relative to the canvas
                player2.y = Math.max(0, Math.min(mouseY - player2.height / 2, canvas.height - player2.height));
            });

            function resetBall(direction) {
                ball.x = canvas.width / 2;
                ball.y = canvas.height / 2;
                ball.speedX = 8 * direction;
                ball.speedY = 8 * (Math.random() > 0.5 ? 1 : -1);
            }

            function update() {
                if (gameOver) return;

                // AI for Player 1
                const paddleCenter = player1.y + (paddleHeight / 2);
                const aiSpeed = paddleSpeed * 0.85; // Make the AI slightly slower than max player speed

                if (paddleCenter < ball.y - 20) {
                    player1.y += aiSpeed;
                } else if (paddleCenter > ball.y + 20) {
                    player1.y -= aiSpeed;
                }

                // Move ball
                ball.x += ball.speedX;
                ball.y += ball.speedY;

                // Wall collision (top/bottom)
                if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
                    ball.speedY = -ball.speedY;
                }

                // Paddle collision
                const activePaddle = ball.x < canvas.width / 2 ? player1 : player2;
                if (
                    ball.x - ball.radius < activePaddle.x + activePaddle.width &&
                    ball.x + ball.radius > activePaddle.x &&
                    ball.y - ball.radius < activePaddle.y + activePaddle.height &&
                    ball.y + ball.radius > activePaddle.y
                ) {
                    ball.speedX = -ball.speedX;
                    ball.speedX *= 1.1; // Increase speed
                }

                // Score
                if (ball.x - ball.radius < 0) {
                    player2.score++;
                    if (player2ScoreElem) player2ScoreElem.textContent = player2.score.toString();
                    resetBall(1);
                } else if (ball.x + ball.radius > canvas.width) {
                    player1.score++;
                    if (player1ScoreElem) player1ScoreElem.textContent = player1.score.toString();
                    resetBall(-1);
                }

                // Check for winner
                if (player1.score >= winningScore || player2.score >= winningScore) {
                    gameOver = true;
                }
            }

            function draw() {
                context.clearRect(0, 0, canvas.width, canvas.height);

                context.fillStyle = '#FF8C00'; // Player 1 Accent Orange
                context.fillRect(player1.x, player1.y, player1.width, player1.height);
                context.fillStyle = '#29ABE2'; // Player 2 Primary Blue
                context.fillRect(player2.x, player2.y, player2.width, player2.height);

                context.beginPath();
                context.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                context.fillStyle = '#111827';
                context.fill();
            }

            function gameLoop() {
                update();
                draw();

                if (gameOver) {
                    context.fillStyle = 'rgba(0, 0, 0, 0.7)';
                    context.fillRect(0, 0, canvas.width, canvas.height);
                    context.fillStyle = '#FFFFFF';
                    context.font = '60px "Space Grotesk"';
                    context.textAlign = 'center';
                    const winnerText = player1.score >= winningScore ? 'Player 1 Wins!' : 'Player 2 Wins!';
                    context.fillText(winnerText, canvas.width / 2, canvas.height / 2);
                } else {
                    requestAnimationFrame(gameLoop);
                }
            }

            gameLoop();
        });
    </script>
</body>
</html>